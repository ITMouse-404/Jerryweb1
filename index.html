<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="https://cdn.vectorstock.com/i/1000v/31/27/hamster-logo-template-isolated-brand-identity-vector-50153127.jpg">
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-<…hash…>"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <title>Jerry</title>
  </head>
  <body>
    <img class="image-gradient" src="gradient.png" alt="" />
    <div class="layer-blur"></div>
    <div class="container">
      <header>
        <h1 data-aos="fade-down" data-aos-duration="1500" class="logo">
          <img
            src="https://cdn.vectorstock.com/i/1000v/31/27/hamster-logo-template-isolated-brand-identity-vector-50153127.jpg"
            alt="mouse"
            class="logo-icon"
          />
          JERRY
        </h1>

        <nav>
          <a data-aos="fade-down" data-aos-duration="2000" href="#"><i class="fa-solid fa-house"></i> HOME</a>
          <a data-aos="fade-down" data-aos-duration="1500" href="https://discord.gg/SHPzMbAQ"><i class="fa-brands fa-discord"></i> DISCORD</a>
          <a data-aos="fade-down" data-aos-duration="2500" href="mailto:itjerry309@gmail.com"><i class="fa-solid fa-envelope"></i> EMAIL</a>
          <a data-aos="fade-down" data-aos-duration="3000" href="https://github.com/ITMouse-404"><i class="fa-brands fa-github"></i>   GITHUB</a>
        </nav>

        <div class="btn-group">
         <a href="login.html" id="loginLink">
            <button
              data-aos="fade-down"
              data-aos-duration="1500"
              class="btn-signing"
            >
              LOGIN
            </button>
         </a>
          <a href="register.html" id="registerLink">
            <button
              data-aos="fade-down"
              data-aos-duration="1500"
              class="btn-signing"
            >
              REGISTER
            </button>
          </a>
        </div>
      </header>

      <main>
        <div class="content">
          <div
            data-aos="fade-zoom-in"
            data-aos-easing="ease-in-back"
            data-aos-delay="300"
            data-aos-offset="0"
            data-aos-duration="1500"
            class="tag-box"
          >
            <div class="tag">INTRUCING &wedbar;</div>
          </div>

          <h1
            data-aos="fade-zoom-in"
            data-aos-easing="ease-in-back"
            data-aos-delay="300"
            data-aos-offset="0"
            data-aos-duration="1500"
          >
            CREATE<br />AND<br />TRADE
          </h1>

          <p
            data-aos="fade-zoom-in"
            data-aos-easing="ease-in-back"
            data-aos-delay="300"
            data-aos-offset="0"
            data-aos-duration="2500"
            class="description"
          >
            Create your own study room, invite and encourage friends to join so
            you can share documents, knowledge, and experiences together. Chat
            after class or work when you're tired.
          </p>
          <div
            data-aos="fade-zoom-in"
            data-aos-easing="ease-in-back"
            data-aos-delay="300"
            data-aos-offset="0"
            data-aos-duration="3000"
            class="buttons"
          >
            <a href="#" class="btn-get-started">Available documentation &gt;</a>
            <a href="#" class="btn-signing-main">Get started &gt;</a>
          </div>
        </div>
      </main>
      <spline-viewer
        data-aos="fade-zoom-in"
        data-aos-easing="ease-in-back"
        data-aos-delay="300"
        data-aos-offset="0"
        data-aos-duration="3000"
        class="robot-3d"
        url="https://prod.spline.design/JbWT7DkkMSmxgeFl/scene.splinecode"
      ></spline-viewer>
    </div>
    <script
      type="module"
      src="https://unpkg.com/@splinetool/viewer@1.12.29/build/spline-viewer.js"
    ></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>
      <script>
   // Kiểm Tra trạng thái login
function checkLoginStatus(){
  const currentUser = localStorage.getItem('currentUser');
  const loginLink = document.getElementById('loginLink');
  const registerLink = document.getElementById('registerLink');
  
  if(currentUser){
    const userData = JSON.parse(currentUser);
    
    // Tạo dropdown menu
    const dropdownHtml = `
      <div class="user-dropdown" id="userDropdown">
        <a href="#" id="welcomeBtn">
          <i class="fa-solid fa-user-check"></i> Welcome, ${userData.username}
        </a>
        <div class="dropdown-content">
          <a href="#" id="changePasswordLink"><i class="fa-solid fa-key"></i> Đổi mật khẩu</a>
          <a href="#" id="logoutLink"><i class="fa-solid fa-right-from-bracket"></i> Đăng xuất</a>
        </div>
      </div>
    `;
    
    loginLink.outerHTML = dropdownHtml;
    registerLink.style.display = 'none';
    
    // Xử lý sự kiện sau khi đã thêm vào DOM
    setTimeout(() => {
      const userDropdown = document.getElementById('userDropdown');
      const welcomeBtn = document.getElementById('welcomeBtn');
      const logoutLink = document.getElementById('logoutLink');
      const changePasswordLink = document.getElementById('changePasswordLink');
      
      // Toggle dropdown khi click vào welcome
      welcomeBtn.addEventListener('click', (e) => {
        e.preventDefault();
        userDropdown.classList.toggle('active');
      });
      
      // Đóng dropdown khi click ra ngoài
      document.addEventListener('click', (e) => {
        if (!userDropdown.contains(e.target)) {
          userDropdown.classList.remove('active');
        }
      });
      // Xử lý đổi mật khẩu
      changePasswordLink.addEventListener('click', (e) => {
        e.preventDefault();
        const newPassword = prompt('Nhập mật khẩu mới (tối thiểu 6 ký tự):');
        if (newPassword && newPassword.length >= 6) {
          const users = JSON.parse(localStorage.getItem('users')) || [];
          const userIndex = users.findIndex(u => u.email === userData.email);
          if (userIndex !== -1) {
            users[userIndex].password = newPassword;
            localStorage.setItem('users', JSON.stringify(users));
            alert('Đổi mật khẩu thành công!');
          }
        } else if (newPassword !== null) {
          alert('Mật khẩu phải có ít nhất 6 ký tự!');
        }
        userDropdown.classList.remove('active');
      });
      
      // Xử lý đăng xuất
      logoutLink.addEventListener('click', (e) => {
        e.preventDefault();
        if(confirm('Bạn muốn đăng xuất ?')){
          localStorage.removeItem('currentUser');
          location.reload();
        }
      });
    }, 0);
    
  } else {
    loginLink.innerHTML = `<i class="fa-solid fa-arrow-right-to-bracket"></i> Login`;
    loginLink.href = "login.html";
    registerLink.style.display = 'inline-block';
  }
}
checkLoginStatus();
  </script>
  </body>
</html>
